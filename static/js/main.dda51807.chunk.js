(this.webpackJsonpsignup5_lia=this.webpackJsonpsignup5_lia||[]).push([[0],{46:function(e,t,n){e.exports=n(60)},51:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(38),r=n.n(c),l=n(24),m=n(27),o=n(16),u=n(6),d=n(18),s=(n(51),n(20)),v=n(23),E=n(25),p=n(21),b=n(19),f=n(15),g=n(13);function h(){var e=Object(f.a)(["\n    query getStoredEvent {\n        storedEvent @client {\n            id\n            title\n            host {\n                id\n                first_name\n                last_name\n            }\n            description\n            date_of_event\n            time_of_event\n            location\n            invitations {\n                id\n                guest {\n                    id\n                    first_name\n                    last_name\n                }\n                event_id\n                attendance\n            }\n        }\n    }\n"]);return h=function(){return e},e}function y(){var e=Object(f.a)(["\n    query loggedInUser {\n        loggedInUser @client {\n            id\n        }\n    }\n"]);return y=function(){return e},e}function O(){var e=Object(f.a)(["\n    query getEventById($id: Int!) {\n        getEventById(id: $id) {\n            id\n            title\n            host {\n                id\n                first_name\n                last_name\n            }\n            description\n            date_of_event\n            time_of_event\n            location\n            invitations {\n                id\n                guest {\n                    id\n                    first_name\n                    last_name\n                }\n                event {\n                    id\n                }\n                attendance\n                comment\n            }\n        }\n    }\n"]);return O=function(){return e},e}function j(){var e=Object(f.a)(["\n    query getPersonByEmail($email: String!) {\n        getPersonByEmail(email: $email) {\n            id\n        }\n    }\n"]);return j=function(){return e},e}function _(){var e=Object(f.a)(["\n    query getPersonByEmail($email: String!) {\n        getPersonByEmail(email: $email) {\n            id\n            first_name\n            last_name\n        }\n    }\n"]);return _=function(){return e},e}function N(){var e=Object(f.a)(["\n    query getUserById($id: Int!) {\n        getUserById(id: $id) {\n            email\n            first_name\n            last_name\n        }\n    }\n"]);return N=function(){return e},e}function I(){var e=Object(f.a)(["\n    query getUsers {\n        getUsers {\n            id\n            email\n            first_name\n            last_name\n        }\n    }\n"]);return I=function(){return e},e}Object(g.a)(I()),Object(g.a)(N()),Object(g.a)(_()),Object(g.a)(j());var k=Object(g.a)(O()),x=(Object(g.a)(y()),Object(g.a)(h()),function(e){var t=e.event,n=(t.id,t.host),a=n.first_name,c=n.last_name,r=t.name,l=void 0===r?"".concat(a," ").concat(c):r,m=t.title,o=t.location,u=t.time_of_event,d=t.date_of_event,s=t.description;return i.a.createElement("div",{className:"card text-center"},i.a.createElement("div",{style:{fontWeight:"bold"},className:"card-header "}," ","Event by ",l),i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"card-title"},m),i.a.createElement("div",{className:"card-text"},s),i.a.createElement("div",{className:"card-text"},"Location: ",o),i.a.createElement("div",{className:"card-text"},"Date: ",d," ",i.a.createElement("br",null)," Time: ",u)))}),C={ATTENDING:"Is attending.",NOT_ATTENDING:"Can't attend.",MAYBE:"Haven't decided yet.",NO_RESPONSE:"Not responded."},T=function(e){var t=Object(a.useState)({commentVisibility:!1}),n=Object(p.a)(t,2),c=n[0],r=n[1],l=e.fname,m=e.lname,o=e.attendance,u=e.comment,d=e.inviteId,v=Object(s.h)(),E=Object(s.g)();return i.a.createElement("div",null,i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-header",onClick:function(){return u?r({commentVisibility:!c.commentVisibility}):null}},i.a.createElement("div",{className:"d-flex justify-content-between"},i.a.createElement("div",null,l," ",m),i.a.createElement("i",{className:"fas fa-check"}),i.a.createElement("div",null,C[o]),i.a.createElement("i",{onClick:function(e){e.stopPropagation(),E.push("".concat(v.pathname,"/").concat(d))},className:"fas fa-user-edit",style:{cursor:"pointer"}}))),i.a.createElement("div",null,c.commentVisibility?i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"card-text"},u)):null)))},w=function(e){var t=e.invited.map((function(e){return i.a.createElement("li",{key:e.id,className:"list-group-item list-group-item-warning"},i.a.createElement(T,{fname:e.guest.first_name,lname:e.guest.last_name,attendance:e.attendance,comment:e.comment,inviteId:e.id}))}));return i.a.createElement("ul",{className:"list-group"},t)},B=n(45);function $(){var e=Object(f.a)(["\n    mutation StoreEvent($event: Event) {\n        storeEvent(event: $event) @client\n    }\n"]);return $=function(){return e},e}function A(){var e=Object(f.a)(["\n    mutation updateInvitation($invitationUpdateInput: InvitationUpdateInput) {\n        updateInvitation(invitationUpdateInput: $invitationUpdateInput) {\n            id\n            message\n        }\n    }\n"]);return A=function(){return e},e}var S=Object(g.a)(A()),D=(Object(g.a)($()),n(58),function(e){return i.a.createElement("input",{type:"submit",key:e.key?e.key:e.id,name:e.name?e.name:e.id,id:e.id,value:e.value,className:"".concat(e.cssButton," button")})}),U=function(e){return i.a.createElement("input",{type:"button",key:e.key?e.key:e.id,name:e.name?e.name:e.id,id:e.id,value:e.value,onClick:e.onClick,className:"".concat(e.cssButton," button")})},q=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{htmlFor:e.id},e.labelText),i.a.createElement("input",{type:"radio",key:e.key?e.key:e.id,id:e.id,name:e.name?e.name:e.id,value:e.value,onChange:e.onChange,checked:e.compare===e.value}))},F=function(e){return i.a.createElement("div",{className:"".concat(e.cssContainer," container")},i.a.createElement("label",{className:"".concat(e.cssLabel," label ").concat(e.value?"active":e.isActive),htmlFor:e.id},e.labelText),i.a.createElement("input",{className:"".concat(e.cssField," field ").concat(e.isActive),key:e.key?e.key:e.id,id:e.id,name:e.name?e.name:e.id,type:e.type,value:e.value,onChange:e.onChange,onMouseOver:e.onActive,onMouseLeave:e.onActive,onFocus:e.onActive,onBlur:e.onActive}))},P=function(e){var t=e.invite,n=t.id,c=t.guest,r=(c.id,c.first_name,c.last_name,t.event.id,t.attendance),l=t.comment,m=Object(s.g)(),o=Object(s.i)(),u=Object(a.useState)({attendance:r,comment:l}),d=Object(p.a)(u,2),b=d[0],f=d[1],g=function(e){e.persist(),f((function(t){return Object(E.a)({},t,Object(v.a)({},e.target.name,e.target.value))}))};return i.a.createElement(B.a,{mutation:S},(function(e,t){t.loading,t.error;return i.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e({variables:{invitationUpdateInput:{id:n,comment:b.comment,attendance:b.attendance}}})}},i.a.createElement(q,{id:"attending",name:"attendance",value:"ATTENDING",labelText:"Attending",onChange:g,compare:b.attendance}),i.a.createElement(q,{id:"not_attending",name:"attendance",value:"NOT_ATTENDING",labelText:"Can't Attend",onChange:g,compare:b.attendance}),i.a.createElement(q,{id:"maybe",name:"attendance",value:"MAYBE",labelText:"Maybe",onChange:g,compare:b.attendance}),i.a.createElement(F,{type:"text",id:"comment",value:b.comment?b.comment:"",onChange:g,labelText:"Comments"}),i.a.createElement(D,{id:"submit",value:"Save"}),i.a.createElement(U,{id:"back",value:"Back",onClick:function(){var e=o.url;e.endsWith("/")&&(e=e.slice(e.length-1)),m.push(e.slice(0,e.lastIndexOf("/")))}}))}))},R=function(){var e=null,t=null,n=Object(s.g)(),c=Object(s.h)().pathname,r=Object(s.i)(),l=Object(b.a)(),m=new RegExp("^".concat(r.url,"/[0-9]+/*$")),o=new RegExp("^".concat(r.url,"/[0-9]+/[0-9]+/*$")),u=new RegExp("/[0-9]+/*"),d=Object(a.useState)({eventId:"",storedEvent:null}),f=Object(p.a)(d,2),g=f[0],h=f[1],y=Object(b.b)(k),O=Object(p.a)(y,2),j=O[0],_=O[1],N=_.loading,I=_.error,x=_.data;return N&&(e=i.a.createElement("p",null,"Loading...")),I&&(e=i.a.createElement("p",null,"No event with this ID.")),x?(t=x.getEventById,g.storedEvent&&t.id===g.storedEvent.id||(h((function(e){return Object(E.a)({},e,{storedEvent:t})})),l.writeData({data:{storedEvent:t}}))):g.storedEvent||N||I||(m.test(c)||o.test(c))&&j({variables:{id:c.match(u)[0].replace(/\//g,"")}}),g.storedEvent&&(o.test(c)||(e=i.a.createElement(s.a,{to:"".concat(r.path,"/").concat(g.storedEvent.id)}))),i.a.createElement("div",null,i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g.storedEvent&&g.storedEvent.id===g.eventId||(j({variables:{id:g.eventId}}),n.push(r.path))}},i.a.createElement("input",{type:"number",value:g.eventId,onChange:function(e){e.persist(),h((function(t){return Object(E.a)({},t,Object(v.a)({},e.target.name,e.target.value))}))},name:"eventId",min:"1",max:"10"}),i.a.createElement("input",{type:"submit",value:"Search"})),i.a.createElement("div",null,e),i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"".concat(r.path,"/:eventId")},g.storedEvent?i.a.createElement(L,{event:g.storedEvent}):null),i.a.createElement(s.b,{path:r.path},N?null:i.a.createElement("h3",null,"Please enter an Event ID (1-3)"))))},L=function(e){var t=Object(s.i)(),n=Object(s.h)().pathname,a=new RegExp("^".concat(t.url,"/[0-9]+/*$")),c=new RegExp("/[0-9]+","g");return i.a.createElement(i.a.Fragment,null,i.a.createElement(x,{event:e.event}),i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"".concat(t.path,"/:inviteId")},a.test(n)?i.a.createElement(P,{invite:e.event.invitations.find((function(e){return e.id===n.match(c)[1].replace(/\//g,"")}))}):i.a.createElement("div",null,"Loading")),i.a.createElement(s.b,{path:t.path},i.a.createElement(w,{invited:e.event.invitations}))))},M=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.b,{to:"/events"},i.a.createElement("h1",null,"Events")),i.a.createElement("div",null,"/signup5_lia"))},G=function(){return i.a.createElement(s.d,null,i.a.createElement(s.b,{path:"/events"},i.a.createElement(R,null)),i.a.createElement(s.b,{path:"/"},i.a.createElement(M,null)))},V=new l.a({addTypename:!1}),J=new m.a({uri:"https://signup5lia.herokuapp.com/graphql/"}),W=new o.a({cache:V,link:J});V.writeData({data:{storedEvent:null}}),r.a.render(i.a.createElement(u.a,{client:W},i.a.createElement(d.a,{basename:"/signup5_lia"},i.a.createElement(G,null))),document.querySelector("#root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.dda51807.chunk.js.map