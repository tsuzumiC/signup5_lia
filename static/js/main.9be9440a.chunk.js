(this.webpackJsonpsignup5_lia=this.webpackJsonpsignup5_lia||[]).push([[0],{47:function(e,t,a){e.exports=a(61)},54:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(39),r=a.n(i),c=a(26),m=a(28),o=a(20),s=a(6),u=a(19),d=a(16),v=a(14);function f(){var e=Object(d.a)(["\n    extend type Mutation {\n        storeEvent(event: Event!): Event!\n    }\n"]);return f=function(){return e},e}var E=Object(v.a)(f()),p=(a(54),a(23)),b=a(13),g=a(11),y=a(12),h=a(22);function N(){var e=Object(d.a)(["\n    query getCachedEvents {\n        events @client {\n            id\n            title\n            host {\n                id\n                first_name\n                last_name\n            }\n            description\n            date_of_event\n            start_time_of_event\n            end_time_of_event\n            location\n            invitations {\n                id\n                guest {\n                    id\n                    first_name\n                    last_name\n                }\n                event {\n                    id\n                }\n                attendance\n                comment\n            }\n        }\n    }\n"]);return N=function(){return e},e}function j(){var e=Object(d.a)(["\n    query loggedInUser {\n        loggedInUser @client {\n            id\n        }\n    }\n"]);return j=function(){return e},e}function x(){var e=Object(d.a)(["\n    query getEventById($id: Int!) {\n        getEventById(id: $id) {\n            id\n            title\n            host {\n                id\n                first_name\n                last_name\n            }\n            description\n            date_of_event\n            start_time_of_event\n            end_time_of_event\n            location\n            invitations {\n                id\n                guest {\n                    id\n                    first_name\n                    last_name\n                }\n                event {\n                    id\n                }\n                attendance\n                comment\n            }\n        }\n    }\n"]);return x=function(){return e},e}function O(){var e=Object(d.a)(["\n    query getUserById($id: Int!) {\n        getUserById(id: $id) {\n            email\n            first_name\n            last_name\n        }\n    }\n"]);return O=function(){return e},e}function w(){var e=Object(d.a)(["\n    query getUsers {\n        getUsers {\n            id\n            email\n            first_name\n            last_name\n        }\n    }\n"]);return w=function(){return e},e}Object(v.a)(w()),Object(v.a)(O());var _=Object(v.a)(x()),C=(Object(v.a)(j()),Object(v.a)(N())),T=a(44),S=a.n(T),k=function(e){var t=e.event,a=t.host,n=a.first_name,i=a.last_name,r=t.name,c=void 0===r?"".concat(n," ").concat(i):r,m=t.title,o=t.location,s=t.time_of_event,u=t.date_of_event,d=t.description;return l.a.createElement("div",{className:"card text-center"},l.a.createElement("div",{style:{fontWeight:"bold"},className:"card-header "}," ","Event by ",c),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"card-title"},m),l.a.createElement("div",{className:"card-text"},d),l.a.createElement("div",{className:"card-text"},"Location: ",o),l.a.createElement("div",{className:"card-text"},"Date: ",u," ",l.a.createElement("br",null)," Time: ",s)))},I=function(e){return{ATTENDING:function(){return l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("i",{style:{marginTop:"5px"},className:"fas fa-check"})," ",l.a.createElement("p",{style:{marginLeft:"60px"}}," Attending"))},NOT_ATTENDING:function(){return l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("i",{style:{marginTop:"5px"},className:"fas fa-times-circle"}),l.a.createElement("p",{style:{marginLeft:"60px"}},"Not Attending "))},MAYBE:function(){return l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("i",{style:{marginTop:"5px"},className:"fas fa-question-circle"}),l.a.createElement("p",{style:{marginLeft:"60px"}},"Maybe"))},NO_RESPONSE:function(){return l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("i",{style:{marginTop:"5px"},className:"fas fa-sync"}),l.a.createElement("p",{style:{marginLeft:"60px"}},"Not respondend"))}}[e.decision]()},F=function(e){var t=Object(n.useState)({commentVisibility:!1}),a=Object(y.a)(t,2),i=a[0],r=a[1],c=e.fname,m=e.lname,o=e.attendance,s=e.comment,u=e.inviteId,d=Object(p.g)(),v=Object(p.f)();return l.a.createElement("div",null,l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header",onClick:function(){return s?r({commentVisibility:!i.commentVisibility}):null}},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("div",null,c," ",m),l.a.createElement(I,{decision:o}),l.a.createElement("i",{onClick:function(e){e.stopPropagation(),v.push("".concat(d.pathname,"/").concat(u))},className:"fas fa-user-edit",style:{cursor:"pointer"}}))),l.a.createElement("div",null,i.commentVisibility?l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"card-text"},s)):null)))},D=function(e){var t=e.invited.map((function(e){return l.a.createElement("li",{key:e.id,className:"list-group-item list-group-item-warning"},l.a.createElement(F,{fname:e.guest.first_name,lname:e.guest.last_name,attendance:e.attendance,comment:e.comment,inviteId:e.id}))}));return l.a.createElement("ul",{className:"list-group"},t)},M=a(25);function R(){var e=Object(d.a)(["\n    mutation StoreEvent($event: Event) {\n        storeEvent(event: $event) @client\n    }\n"]);return R=function(){return e},e}function $(){var e=Object(d.a)(["\n    mutation createUser($user: NewUser, $password: Password) {\n        createEvent(user: $user, password: $password) {\n            id\n            message\n        }\n    }\n"]);return $=function(){return e},e}function W(){var e=Object(d.a)(["\n    mutation createEvent($event: CreateEventInput) {\n        createEvent(event: $event) {\n            id\n            message\n        }\n    }\n"]);return W=function(){return e},e}function B(){var e=Object(d.a)(["\n    mutation updateInvitation($invitation: UpdateInvitationInput) {\n        updateInvitation(invitation: $invitation) {\n            id\n            message\n        }\n    }\n"]);return B=function(){return e},e}var A=Object(v.a)(B()),L=Object(v.a)(W()),q=(Object(v.a)($()),Object(v.a)(R()),a(60),function(e){return l.a.createElement("input",{type:"submit",key:e.key?e.key:e.id,name:e.name?e.name:e.id,id:e.id,value:e.value,className:"".concat(e.cssButton," button")})}),G=function(e){return l.a.createElement("input",{type:"button",key:e.key?e.key:e.id,name:e.name?e.name:e.id,id:e.id,value:e.value,onClick:e.onClick,className:"".concat(e.cssButton," button")})},U=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{htmlFor:e.id},e.labelText),l.a.createElement("input",{type:"radio",key:e.key?e.key:e.id,id:e.id,name:e.name?e.name:e.id,value:e.value,onChange:e.onChange,checked:e.compare===e.value}))},V=function(e){var t=Object(n.useState)(""),a=Object(y.a)(t,2),i=a[0],r=a[1],c=function(e){"mouseover"===e.type||"focus"===e.type?r("active"):("mouseleave"===e.type&&document.activeElement.id!==e.target.name||"blur"===e.type)&&r("")};return l.a.createElement("div",{className:"container"},l.a.createElement("label",{className:"".concat(e.cssLabel," label ").concat(e.value?"active":i),htmlFor:e.id},e.labelText),l.a.createElement("input",{className:"".concat(e.cssField," field ").concat(i," ").concat(e.validate?"validate":""),key:e.key?e.key:e.id,id:e.id,name:e.name?e.name:e.id,type:e.type,value:e.value,onChange:e.onChange,onMouseOver:c,onMouseLeave:c,onFocus:c,onBlur:c}),l.a.createElement("p",{className:"message"},e.validate))},P=function(e){var t=Object(p.f)(),a=e.invite,i=a.id,r=a.guest,c=r.first_name,m=r.last_name,o=a.event.id,s=a.attendance,u=a.comment,d=Object(n.useState)({attendance:s,comment:u}),v=Object(y.a)(d,2),f=v[0],E=v[1],h=function(e){e.persist(),E((function(t){return Object(g.a)({},t,Object(b.a)({},e.target.name,e.target.value))}))};return l.a.createElement(M.a,{mutation:A,update:function(e,t){t.data.updateInvitation;var a=e.readQuery({query:C}).events,n=a.find((function(e){return e.id===o})),l=n.invitations.find((function(e){return e.id===i}));l.attendance=f.attendance,l.comment=f.comment,n.invitations=n.invitations.concat(l),e.writeQuery({query:C,data:{events:a.concat(n)}})}},(function(e,a){a.loading,a.error;return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"card bg-warning "},l.a.createElement("div",{style:{color:"black"},className:"card-header "},l.a.createElement("div",{className:"d-flex  justify-content-center"},l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e({variables:{invitation:{id:i,comment:f.comment,attendance:f.attendance}}})}},l.a.createElement("div",{className:"d-flex flex-column text-center"},"".concat(c," ").concat(m),l.a.createElement("div",{className:"card-title mt-5"},"Are you attending this event ?"),l.a.createElement("div",{className:"d-flex  justify-content-around"},l.a.createElement("div",{className:"d-flex  flex-column"},l.a.createElement(U,{id:"attending",name:"attendance",value:"ATTENDING",labelText:"Attending",onChange:h,compare:f.attendance})),l.a.createElement("div",{className:"d-flex  flex-column"},l.a.createElement(U,{id:"not_attending",name:"attendance",value:"NOT_ATTENDING",labelText:"Can't Attend",onChange:h,compare:f.attendance})),l.a.createElement("div",{className:"d-flex  flex-column"},l.a.createElement(U,{id:"maybe",name:"attendance",value:"MAYBE",labelText:"Maybe",onChange:h,compare:f.attendance})))),l.a.createElement("div",{className:"card-body"},l.a.createElement(V,{type:"text",id:"comment",value:f.comment?f.comment:"",onChange:h,labelText:"Comments"}),l.a.createElement(q,{id:"submit",value:"Save"}),l.a.createElement(G,{id:"back",value:"Back",onClick:function(){t.push("/events/".concat(o))}})))))))}))},z=function(){var e=Object(p.h)(),t=Object(p.g)().pathname,a=Object(h.a)(),i=new RegExp("".concat(e.url,"/*[0-9]+/*")),r=new RegExp("".concat(e.url)),c=new RegExp("/[0-9]+/*","g"),m=t.match(c)[0].replace(/\//g,""),o=t.replace(r,"").replace(/\//g,""),s=Object(n.useState)(null),u=Object(y.a)(s,2),d=u[0],v=u[1],f=Object(h.d)(C).data.events,E=Object(h.b)(_),b=Object(y.a)(E,2),g=b[0],N=b[1],j=N.data,x=N.loading,O=N.error,w=null,T=null;if(x)return null!==d&&v(null),l.a.createElement("p",null,"Loading event ".concat(m));if(j&&j.getEventById.id===m)null!==d&&v(null),w=j.getEventById,f.find((function(e){return S.a.isEqual(e,w)}))||a.writeData({data:{events:f.length>0?f.concat(w):[w]}});else if(f.find((function(e){return e.id===m})))null!==d&&v(null),w=f.find((function(e){return e.id===m}));else{if(O&&(m===d||null===d))return null===d&&v(m),l.a.createElement("pre",null,"Error loading event ".concat(m," with response:\n    ").concat(O));null!==d&&v(null),g({variables:{id:m}})}return i.test(t)&&w&&(T=w.invitations.find((function(e){return e.id===o}))),null===w?l.a.createElement("p",null,"Loading event ".concat(m)):l.a.createElement(l.a.Fragment,null,l.a.createElement(k,{event:w}),l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"".concat(e.path,"/:inviteId")},T?l.a.createElement(P,{invite:T}):l.a.createElement("p",null,"Invalid invite ID")),l.a.createElement(p.a,{path:e.path},l.a.createElement(D,{invited:w.invitations}))))},H=function(){var e=Object(p.h)(),t=Object(p.g)().pathname,a=Object(p.f)(),i=new RegExp("".concat(e.url,"/[0-9]+/*")),r=new RegExp("/[0-9]+/*","g"),c=Object(n.useState)({inputValue:i.test(t)?t.match(r)[0].replace(/\//g,""):""}),m=Object(y.a)(c,2),o=m[0],s=m[1];return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a.push("/events/".concat(o.inputValue))}},l.a.createElement("input",{type:"number",value:o.inputValue,onChange:function(e){e.persist(),s((function(t){return Object(g.a)({},t,Object(b.a)({},e.target.name,e.target.value))}))},name:"inputValue"}),l.a.createElement("input",{type:"submit",value:"Search"})),l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"".concat(e.path,"/:eventId")},l.a.createElement(z,null)),l.a.createElement(p.a,{path:e.path},"Search for an Event")))},J=function(){var e=Object(n.useState)({addGuestForm:!1,title:"",location:"",date:"",startTime:"",endTime:"",description:"",guests:[],gName:"",gSurname:"",gEmail:""}),t=Object(y.a)(e,2),a=t[0],i=t[1],r=a.addGuestForm,c=a.title,m=a.location,o=a.date,s=a.startTime,u=a.endTime,d=a.description,v=a.guests,f=a.gName,E=a.gSurname,h=a.gEmail,N=Object(p.f)(),j=function(e){e.persist(),i((function(t){return Object(g.a)({},t,Object(b.a)({},e.target.name,e.target.value))}))};return l.a.createElement("div",{style:{backgroundColor:"#ECD275"},className:"card"},l.a.createElement("div",{className:"card-header"},l.a.createElement("div",{style:{fontSize:24,padding:"0 5px"},className:"d-inline ml-3"},"Create New Event")),l.a.createElement(M.a,{mutation:L,onCompleted:function(e){var t=e.id;N.push("/events/".concat(t))}},(function(e,t){var a=t.loading,n=t.error;return l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"d-flex flex-column"},l.a.createElement("div",null,l.a.createElement("label",{className:"mr-2",style:{fontWeight:"bold"},htmlFor:"title"},"Event Name :"),l.a.createElement("input",{value:c,onChange:j,name:"title",id:"title",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{className:"mr-4",style:{fontWeight:"bold"},htmlFor:"location"},"Location :"),l.a.createElement("input",{value:m,onChange:j,name:"location",id:"location",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{className:"mr-5",style:{fontWeight:"bold"},htmlFor:"date"},"Date:"),l.a.createElement("input",{value:o,onChange:j,name:"date",id:"date",type:"date"}),l.a.createElement("label",{className:"ml-1",style:{fontWeight:"bold"},htmlFor:"startTime"},"Start Time:"),l.a.createElement("input",{value:s,onChange:j,name:"startTime",id:"startTime",type:"time"}),l.a.createElement("label",{className:"ml-1",style:{fontWeight:"bold"},htmlFor:"endTime"},"End Time:"),l.a.createElement("input",{value:u,onChange:j,name:"endTime",id:"endTime",type:"time"}))),l.a.createElement("div",null,l.a.createElement("p",{className:"ml-3"},"Description : "),l.a.createElement("textarea",{value:d,onChange:j,name:"description",id:"description",cols:"50",rows:"10"})),l.a.createElement("div",null,l.a.createElement(l.a.Fragment,null,v.length>0?l.a.createElement("div",null,l.a.createElement("div",{style:{color:"grey"}},"Name\u2003\u2003\u2003\u2003Surname\u2003\u2003\u2003\u2003Email"," ",l.a.createElement("br",null)),l.a.createElement("ul",{className:"list-group"},v.map((function(e){return l.a.createElement("li",{key:e.id,className:"list-group-item list-group-item-warning"},l.a.createElement("div",null,l.a.createElement("div",{style:{color:"#000",fontWeight:"bold"}},e.first_name,"\u2003\u2003\u2003\u2003",e.last_name,"\u2003\u2003\u2003\u2003",e.email," ","\u2003\u2003\u2003\u2003",l.a.createElement("i",{onClick:function(){i((function(t){return Object(g.a)({},t,{guests:v.filter((function(t){return t.id!==e.id}))})}))},style:{cursor:"pointer"},className:"fas fa-trash-alt"}))))})))):null),l.a.createElement("button",{onClick:function(){i((function(e){return Object(g.a)({},e,{addGuestForm:!r})}))},type:"button",className:"btn btn-warning mt-2 mb-2"}," ",l.a.createElement("i",{style:{marginRight:"10px"},className:"fas fa-plus"})," ","Invitation"),l.a.createElement("div",null,r?l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==f&&""!==E&&""!==h&&i((function(e){return Object(g.a)({},e,{addGuestForm:!r,gEmail:"",gName:"",gSurname:"",guests:v.concat({first_name:f,last_name:E,email:h})})})),console.log(v)},className:"d-inline-flex flex-column border border-info mb-5"},l.a.createElement("div",null,l.a.createElement("label",{className:"mr-2",style:{fontWeight:"bold"},htmlFor:"gName"}," ","Guest Name :"),l.a.createElement("input",{value:f,onChange:j,name:"gName",id:"gName",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{className:"mr-4",style:{fontWeight:"bold"},htmlFor:"gSurname"},"Guest Surname :"),l.a.createElement("input",{value:E,onChange:j,name:"gSurname",id:"gSurname",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{className:"mr-4",style:{fontWeight:"bold"},htmlFor:"gEmail"},"Guest Email :"),l.a.createElement("input",{value:h,onChange:j,name:"gEmail",id:"gEmail",type:"email"})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit",className:"btn btn-success mb-3"},"Add Invitation"))):null)),l.a.createElement("div",{className:"d-inline-flex"},l.a.createElement("button",{onClick:function(){N.push("/")},type:"button",className:"btn btn-light mr-2"},"Cancel"),l.a.createElement("button",{onClick:function(t){!function(e,t){""!==c&&""!==m&&""!==o&&""!==s&&""!==u&&""!==d&&v.length>0?e({variables:{event:{host:{id:1},title:c,description:d,date_of_event:o,start_time_of_event:s,end_time_of_event:u,location:m,invitations:v.map((function(e){return{guest:e}}))}}}):alert("missing field pls fill everywhere")}(e)},type:"button",className:"btn btn-primary",disabled:a},"Create"),n))})))},Q=function(){var e=Object(n.useState)({firstName:"",lastName:"",eMail:"",password:"",passwordRepeat:"",validate:{firstName:"",lastName:"",eMail:"",password:"",passwordRepeat:""}}),t=Object(y.a)(e,2),a=t[0],i=t[1],r=a.firstName,c=a.lastName,m=a.eMail,o=a.password,s=a.passwordRepeat,u=a.validate,d=function(e){e.persist(),e.target.name.match(/^(password|passwordRepeat)$/)?i((function(t){var a;return Object(g.a)({},t,(a={},Object(b.a)(a,e.target.name,e.target.value),Object(b.a)(a,"validate",Object(g.a)({},t.validate,{password:"",passwordRepeat:""})),a))})):i((function(t){var a;return Object(g.a)({},t,(a={},Object(b.a)(a,e.target.name,e.target.value),Object(b.a)(a,"validate",Object(g.a)({},t.validate,Object(b.a)({},e.target.name,""))),a))}))};return l.a.createElement("div",null,l.a.createElement(M.a,{mutation:L,onCompleted:""},(function(e,t){t.loading,t.error;return l.a.createElement("form",{onSubmit:function(t){!function(e,t){t.preventDefault(),o!==s?i((function(e){return Object(g.a)({},e,{validate:Object(g.a)({},e.validate,{password:"Password Mismatch",passwordRepeat:"Password Mismatch"})})})):e({variables:{user:{first_name:r,last_name:c,email:m},password:o}})}(e,t)},style:{display:"flex",flexDirection:"column",alignItems:"center",width:"500px"}},l.a.createElement(V,{type:"text",value:r,id:"firstName",onChange:d,labelText:"First Name",validate:u.firstName}),l.a.createElement(V,{type:"text",value:c,id:"lastName",onChange:d,labelText:"Last Name",validate:u.lastName}),l.a.createElement(V,{type:"email",value:m,id:"eMail",onChange:d,labelText:"E-Mail",validate:u.eMail}),l.a.createElement(V,{type:"password",value:o,id:"password",onChange:d,labelText:"Password",validate:u.password}),l.a.createElement(V,{type:"password",value:s,id:"passwordRepeat",onChange:d,labelText:"Repeat Password",validate:u.passwordRepeat}),l.a.createElement(q,{value:"Submit",cssButton:"submit"}))})))},Y=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{width:"400px",marginLeft:"10px"}},l.a.createElement("ul",{style:{height:"40px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",listStyle:"none",padding:0,fontSize:"24px"}},l.a.createElement("li",null,l.a.createElement(u.b,{exact:!0,to:"/",activeStyle:{fontWeight:"bold",color:"red"}},"Home")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/events",activeStyle:{fontWeight:"bold",color:"red"}},"Events")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/new-event",activeStyle:{fontWeight:"bold",color:"red"}},"New Event")),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/create-user",activeStyle:{fontWeight:"bold",color:"red"}},"New User")))),l.a.createElement(p.c,null,l.a.createElement(p.a,{exact:!0,path:"/"},l.a.createElement("div",null,"Home")),l.a.createElement(p.a,{path:"/events"},l.a.createElement(H,null)),l.a.createElement(p.a,{path:"/new-event"},l.a.createElement(J,null)),l.a.createElement(p.a,{path:"/create-user"},l.a.createElement(Q,null))))},K=new c.a,X=new m.a({uri:"https://signup5liadev.herokuapp.com/graphql/"}),Z=new o.a({cache:K,link:X,resolvers:{Mutation:{storeEvent:function(e,t,a){a.cache.writeData({storedEvent:t.event})}}},typeDefs:E});K.writeData({data:{events:[]}}),r.a.render(l.a.createElement(s.a,{client:Z},l.a.createElement(u.a,{basename:"/signup5_lia"},l.a.createElement(Y,null))),document.querySelector("#root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.9be9440a.chunk.js.map