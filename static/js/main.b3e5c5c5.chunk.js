(this.webpackJsonpsignup5_lia=this.webpackJsonpsignup5_lia||[]).push([[0],{151:function(e,t,n){e.exports=n(419)},155:function(e,t,n){},161:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(30),r=n.n(i),l=n(58),m=n(67),o=n(29),d=n(8),u=n(36),s=(n(155),n(38)),v=n(49),E=n(59),f=n(44),b=n(37),p=n(27),g=n(22);function h(){var e=Object(p.a)(["\n    query getStoredEvent {\n        storedEvent @client {\n            id\n            title\n            host {\n                id\n                first_name\n                last_name\n            }\n            description\n            date_of_event\n            time_of_event\n            location\n            invitations {\n                id\n                guest {\n                    id\n                    first_name\n                    last_name\n                }\n                event {\n                    id\n                }\n                attendance\n                comment\n            }\n        }\n    }\n"]);return h=function(){return e},e}function y(){var e=Object(p.a)(["\n    query loggedInUser {\n        loggedInUser @client {\n            id\n        }\n    }\n"]);return y=function(){return e},e}function O(){var e=Object(p.a)(["\n    query getEventById($id: Int!) {\n        getEventById(id: $id) {\n            id\n            title\n            host {\n                id\n                first_name\n                last_name\n            }\n            description\n            date_of_event\n            time_of_event\n            location\n            invitations {\n                id\n                guest {\n                    id\n                    first_name\n                    last_name\n                }\n                event {\n                    id\n                }\n                attendance\n                comment\n            }\n        }\n    }\n"]);return O=function(){return e},e}function N(){var e=Object(p.a)(["\n    query getPersonByEmail($email: String!) {\n        getPersonByEmail(email: $email) {\n            id\n        }\n    }\n"]);return N=function(){return e},e}function j(){var e=Object(p.a)(["\n    query getPersonByEmail($email: String!) {\n        getPersonByEmail(email: $email) {\n            id\n            first_name\n            last_name\n        }\n    }\n"]);return j=function(){return e},e}function _(){var e=Object(p.a)(["\n    query getUserById($id: Int!) {\n        getUserById(id: $id) {\n            email\n            first_name\n            last_name\n        }\n    }\n"]);return _=function(){return e},e}function I(){var e=Object(p.a)(["\n    query getUsers {\n        getUsers {\n            id\n            email\n            first_name\n            last_name\n        }\n    }\n"]);return I=function(){return e},e}Object(g.a)(I()),Object(g.a)(_()),Object(g.a)(j()),Object(g.a)(N());var x=Object(g.a)(O()),k=(Object(g.a)(y()),Object(g.a)(h()),function(e){var t=e.event,n=(t.id,t.host),a=n.first_name,i=n.last_name,r=t.name,l=void 0===r?"".concat(a," ").concat(i):r,m=t.title,o=t.location,d=t.time_of_event,u=t.date_of_event,s=t.description;return c.a.createElement("div",{className:"card text-center"},c.a.createElement("div",{style:{fontWeight:"bold"},className:"card-header "}," ","Event by ",l),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"card-title"},m),c.a.createElement("div",{className:"card-text"},s),c.a.createElement("div",{className:"card-text"},"Location: ",o),c.a.createElement("div",{className:"card-text"},"Date: ",u," ",c.a.createElement("br",null)," Time: ",d)))}),C={ATTENDING:"Is attending.",NOT_ATTENDING:"Can't attend.",MAYBE:"Haven't decided yet.",NO_RESPONSE:"Not responded."},T=function(e){var t=Object(a.useState)({commentVisibility:!1}),n=Object(f.a)(t,2),i=n[0],r=n[1],l=e.fname,m=e.lname,o=e.attendance,d=e.comment,u=e.inviteId,v=Object(s.h)(),E=Object(s.g)();return c.a.createElement("div",null,c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header",onClick:function(){return d?r({commentVisibility:!i.commentVisibility}):null}},c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",null,l," ",m),c.a.createElement("i",{className:"fas fa-check"}),c.a.createElement("div",null,C[o]),c.a.createElement("i",{onClick:function(e){e.stopPropagation(),E.push("".concat(v.pathname,"/").concat(u))},className:"fas fa-user-edit",style:{cursor:"pointer"}}))),c.a.createElement("div",null,i.commentVisibility?c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"card-text"},d)):null)))},w=function(e){var t=e.invited.map((function(e){return c.a.createElement("li",{key:e.id,className:"list-group-item list-group-item-warning"},c.a.createElement(T,{fname:e.guest.first_name,lname:e.guest.last_name,attendance:e.attendance,comment:e.comment,inviteId:e.id}))}));return c.a.createElement("ul",{className:"list-group"},t)},A=n(150);function B(){var e=Object(p.a)(["\n    mutation StoreEvent($event: Event) {\n        storeEvent(event: $event) @client\n    }\n"]);return B=function(){return e},e}function $(){var e=Object(p.a)(["\n    mutation updateInvitation($invitationUpdateInput: InvitationUpdateInput) {\n        updateInvitation(invitationUpdateInput: $invitationUpdateInput) {\n            id\n            message\n        }\n    }\n"]);return $=function(){return e},e}var S=Object(g.a)($()),D=(Object(g.a)(B()),n(161),function(e){return c.a.createElement("input",{type:"submit",key:e.key?e.key:e.id,name:e.name?e.name:e.id,id:e.id,value:e.value,className:"".concat(e.cssButton," button")})}),U=function(e){return c.a.createElement("input",{type:"button",key:e.key?e.key:e.id,name:e.name?e.name:e.id,id:e.id,value:e.value,onClick:e.onClick,className:"".concat(e.cssButton," button")})},q=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("label",{htmlFor:e.id},e.labelText),c.a.createElement("input",{type:"radio",key:e.key?e.key:e.id,id:e.id,name:e.name?e.name:e.id,value:e.value,onChange:e.onChange,checked:e.compare===e.value}))},F=function(e){return c.a.createElement("div",{className:"".concat(e.cssContainer," container")},c.a.createElement("label",{className:"".concat(e.cssLabel," label ").concat(e.value?"active":e.isActive),htmlFor:e.id},e.labelText),c.a.createElement("input",{className:"".concat(e.cssField," field ").concat(e.isActive),key:e.key?e.key:e.id,id:e.id,name:e.name?e.name:e.id,type:e.type,value:e.value,onChange:e.onChange,onMouseOver:e.onActive,onMouseLeave:e.onActive,onFocus:e.onActive,onBlur:e.onActive}))},P=(n(162),function(e){var t=e.invite,n=t.id,i=t.guest,r=(i.id,i.first_name),l=i.last_name,m=(t.event.id,t.attendance),o=t.comment,d=Object(s.g)(),u=Object(s.i)(),b=Object(a.useState)({attendance:m,comment:o}),p=Object(f.a)(b,2),g=p[0],h=p[1],y=function(e){e.persist(),h((function(t){return Object(E.a)({},t,Object(v.a)({},e.target.name,e.target.value))}))};return c.a.createElement(A.a,{mutation:S},(function(e,t){t.loading,t.error;return c.a.createElement("div",{className:"container mt-5"},c.a.createElement("div",{className:"card bg-warning "},c.a.createElement("div",{style:{color:"black"},className:"card-header "},c.a.createElement("div",{className:"d-flex  justify-content-center"},c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e({variables:{invitationUpdateInput:{id:n,comment:g.comment,attendance:g.attendance}}})}},c.a.createElement("div",{className:"d-flex flex-column text-center"},"".concat(r," ").concat(l),c.a.createElement("div",{className:"card-title mt-5"},"Are you attending this event ?"),c.a.createElement("div",{className:"d-flex  justify-content-around"},c.a.createElement("div",{className:"d-flex  flex-column"},c.a.createElement(q,{id:"attending",name:"attendance",value:"ATTENDING",labelText:"Attending",onChange:y,compare:g.attendance})),c.a.createElement("div",{className:"d-flex  flex-column"},c.a.createElement(q,{id:"not_attending",name:"attendance",value:"NOT_ATTENDING",labelText:"Can't Attend",onChange:y,compare:g.attendance})),c.a.createElement("div",{className:"d-flex  flex-column"},c.a.createElement(q,{id:"maybe",name:"attendance",value:"MAYBE",labelText:"Maybe",onChange:y,compare:g.attendance})))),c.a.createElement("div",{className:"card-body"},c.a.createElement(F,{type:"text",id:"comment",value:g.comment?g.comment:"",onChange:y,labelText:"Comments"}),c.a.createElement(D,{id:"submit",value:"Save"}),c.a.createElement(U,{id:"back",value:"Back",onClick:function(){var e=u.url;e.endsWith("/")&&(e=e.slice(e.length-1)),d.push(e.slice(0,e.lastIndexOf("/")))}})))))))}))}),R=function(){var e=null,t=null,n=Object(s.g)(),i=Object(s.h)().pathname,r=Object(s.i)(),l=Object(b.a)(),m=new RegExp("^".concat(r.url,"/[0-9]+/*$")),o=new RegExp("^".concat(r.url,"/[0-9]+/[0-9]+/*$")),d=new RegExp("/[0-9]+/*"),u=Object(a.useState)({eventId:"",storedEvent:null}),p=Object(f.a)(u,2),g=p[0],h=p[1],y=Object(b.b)(x),O=Object(f.a)(y,2),N=O[0],j=O[1],_=j.loading,I=j.error,k=j.data;return _&&(e=c.a.createElement("p",null,"Loading...")),I&&(e=c.a.createElement("p",null,"No event with this ID.")),k?(t=k.getEventById,g.storedEvent&&t.id===g.storedEvent.id||(h((function(e){return Object(E.a)({},e,{storedEvent:t})})),l.writeData({data:{storedEvent:t}}))):g.storedEvent||_||I||(m.test(i)||o.test(i))&&N({variables:{id:i.match(d)[0].replace(/\//g,"")}}),g.storedEvent&&(o.test(i)||(e=c.a.createElement(s.a,{to:"".concat(r.path,"/").concat(g.storedEvent.id)}))),c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g.storedEvent&&g.storedEvent.id===g.eventId||(N({variables:{id:g.eventId}}),n.push(r.path))}},c.a.createElement("input",{type:"number",value:g.eventId,onChange:function(e){e.persist(),h((function(t){return Object(E.a)({},t,Object(v.a)({},e.target.name,e.target.value))}))},name:"eventId",min:"1",max:"10"}),c.a.createElement("input",{type:"submit",value:"Search"})),c.a.createElement("div",null,e),c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"".concat(r.path,"/:eventId")},g.storedEvent?c.a.createElement(L,{event:g.storedEvent}):null),c.a.createElement(s.b,{path:r.path},_?null:c.a.createElement("h3",null,"Please enter an Event ID (1-3)"))))},L=function(e){var t=Object(s.i)(),n=Object(s.h)().pathname,a=new RegExp("^".concat(t.url,"/[0-9]+/*$")),i=new RegExp("/[0-9]+","g");return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{event:e.event}),c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"".concat(t.path,"/:inviteId")},a.test(n)?c.a.createElement(P,{invite:e.event.invitations.find((function(e){return e.id===n.match(i)[1].replace(/\//g,"")}))}):c.a.createElement("div",null,"Loading")),c.a.createElement(s.b,{path:t.path},c.a.createElement(w,{invited:e.event.invitations}))))},M=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.b,{to:"/events"},c.a.createElement("h1",null,"Events")))},G=function(){return c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/events"},c.a.createElement(R,null)),c.a.createElement(s.b,{path:"/"},c.a.createElement(M,null)))},V=new l.a({addTypename:!1}),J=new m.a({uri:"https://signup5lia.herokuapp.com/graphql/"}),W=new o.a({cache:V,link:J});V.writeData({data:{storedEvent:null}}),r.a.render(c.a.createElement(d.a,{client:W},c.a.createElement(u.a,{basename:"/signup5_lia"},c.a.createElement(G,null))),document.querySelector("#root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.b3e5c5c5.chunk.js.map